2017/9/28 测试内容
---------------------------------------------------------------------------------------------------------------------------
1.分词标注
http://127.0.0.1:5555/segmentor?content=我写代码突然肚子痛，头晕，好像怀孕了，不知道会不会死。

[
  {
    "id": 1,
    "word": "我",
    "tag": "r",
    "symptom_flag": 0
  },
  {
    "id": 2,
    "word": "写",
    "tag": "v",
    "symptom_flag": 0
  },
  {
    "id": 3,
    "word": "代码",
    "tag": "n",
    "symptom_flag": 0
  },
  {
    "id": 4,
    "word": "突然",
    "tag": "ad",
    "symptom_flag": 0
  },
  {
    "id": 5,
    "word": "肚子痛",
    "tag": "n",
    "symptom_flag": 0
  },
  {
    "id": 6,
    "word": "，",
    "tag": "x",
    "symptom_flag": 0
  },
  {
    "id": 7,
    "word": "头晕",
    "tag": "n",
    "symptom_flag": 1
  },
  {
    "id": 8,
    "word": "，",
    "tag": "x",
    "symptom_flag": 0
  },
  {
    "id": 9,
    "word": "好像",
    "tag": "v",
    "symptom_flag": 0
  },
  {
    "id": 10,
    "word": "怀孕",
    "tag": "v",
    "symptom_flag": 0
  },
  {
    "id": 11,
    "word": "了",
    "tag": "ul",
    "symptom_flag": 0
  },
  {
    "id": 12,
    "word": "，",
    "tag": "x",
    "symptom_flag": 0
  },
  {
    "id": 13,
    "word": "不",
    "tag": "d",
    "symptom_flag": 0
  },
  {
    "id": 14,
    "word": "知道",
    "tag": "v",
    "symptom_flag": 0
  },
  {
    "id": 15,
    "word": "会",
    "tag": "v",
    "symptom_flag": 0
  },
  {
    "id": 16,
    "word": "不会",
    "tag": "v",
    "symptom_flag": 0
  },
  {
    "id": 17,
    "word": "死",
    "tag": "v",
    "symptom_flag": 0
  },
  {
    "id": 18,
    "word": "。",
    "tag": "x",
    "symptom_flag": 0
  }
]


2.实体抽取
http://127.0.0.1:5560/entity?content=患者高血压和心脏病五年，现出现反复活动后胸闷、气促、肢肿十余年。偶尔伴有腹胀，出血，质稀，发热，我觉得我有糖尿病

[
  {
    "disease": "糖尿病",
    "symptom": [
      "腹胀",
      "肢肿",
      "发热",
      "胸闷",
      "气促"
    ],
    "symptomAll": [
      "视力障碍",
      "糖尿病酮症酸中毒",
      "乏力",
      "多尿",
      "血糖升高",
      "消瘦",
      "食量增加",
      "多饮",
      "烦渴多饮",
      "体重减轻"
    ]
  },
  {
    "disease": "高血压",
    "symptom": [
      "腹胀",
      "肢肿",
      "发热",
      "胸闷",
      "气促"
    ],
    "symptomAll": [
      "视力障碍",
      "心绞痛",
      "疲劳",
      "失眠",
      "心力衰竭",
      "紧张",
      "注意力不集中",
      "剧烈头痛",
      "水肿",
      "心功能失代偿"
    ]
  }
]

3.词频统计
http://127.0.0.1:5556/freq?content=我写代码突然肚子痛，头晕，好像怀孕了，不知道会不会死。

{
  "n": [
    {
      "name": "代码",
      "count": 1
    },
    {
      "name": "肚子痛",
      "count": 1
    }
  ],
  "v": [
    {
      "name": "写",
      "count": 1
    },
    {
      "name": "好像",
      "count": 1
    },
    {
      "name": "怀孕",
      "count": 1
    },
    {
      "name": "知道",
      "count": 1
    },
    {
      "name": "会",
      "count": 1
    },
    {
      "name": "不会",
      "count": 1
    },
    {
      "name": "死",
      "count": 1
    }
  ],
  "adj": [],
  "symptom": [
    {
      "name": "头晕",
      "count": 1
    }
  ]
}


4. word2vec
http://127.0.0.1:5557/w2v?content=患者十年头疼

[
  {
    "value": [
      "-19.5114",
      "16.6131",
      "14.9725",
      "-3.54716",
      "18.2567",
      "12.2797",
      "-6.58626",
      "1.03983",
      "2.45383",
      "-9.74726",
      "5.08744",
      "9.33234",
      "16.4877",
      "-7.66412",
      "8.84339",
      "-3.88031",
      "12.5247",
      "17.9381",
      "-6.55286",
      "17.3832",
      "2.44169",
      "-0.928786",
      "-12.7778",
      "10.2153",
      "-7.62657",
      "15.8782",
      "14.1246",
      "27.7832",
      "7.41589",
      "15.8081",
      "3.61242",
      "-5.35852",
      "1.07924",
      "-7.61013",
      "2.92754",
      "-4.19985",
      "-2.95554",
      "-8.11465",
      "-3.96574",
      "-14.2403",
      "-9.24793",
      "14.5495",
      "10.6757",
      "-21.1388",
      "4.76649",
      "13.837",
      "7.17443",
      "6.13602",
      "5.3186",
      "0.495721",
      "-26.486",
      "3.55414",
      "-7.98257",
      "13.5953",
      "-13.1249",
      "9.7455",
      "-9.55725",
      "9.77425",
      "15.7028",
      "-2.07302",
      "18.0305",
      "11.9818",
      "0.445642",
      "-29.0886",
      "13.1406",
      "10.8857",
      "6.80873",
      "14.6226",
      "-8.15924",
      "34.2948",
      "3.16361",
      "-9.91572",
      "25.194",
      "-26.3317",
      "5.60591",
      "-6.78183",
      "-8.87989",
      "-1.77813",
      "-6.45304",
      "9.55072",
      "-2.88368",
      "-15.8998",
      "9.08151",
      "7.04876",
      "-3.47814",
      "-3.40403",
      "-29.7753",
      "2.39687",
      "-6.81837",
      "-13.451",
      "-33.2083",
      "-0.198092",
      "-1.69175",
      "-4.64743",
      "1.9538",
      "5.71071",
      "0.402406",
      "5.06469",
      "-8.88316",
      "8.25601",
      "4.46594",
      "22.841",
      "-7.75838",
      "-3.35954",
      "-20.0796",
      "8.55892",
      "-3.36581",
      "19.501",
      "-4.39299",
      "5.58209",
      "8.75519",
      "-18.6295",
      "14.8409",
      "2.54078",
      "5.35048",
      "-17.6285",
      "21.5393",
      "3.42074",
      "1.31076",
      "24.4064"
    ],
    "word": "患者"
  },
  {
    "value": [
      "-13.2896",
      "4.78743",
      "-11.0781",
      "7.55158",
      "11.9062",
      "-3.13552",
      "-9.55142",
      "-8.59052",
      "3.64839",
      "3.71237",
      "-5.39908",
      "-16.3857",
      "-1.57466",
      "-6.23613",
      "2.96803",
      "15.7903",
      "11.6052",
      "-9.45113",
      "-11.8705",
      "1.82684",
      "12.6785",
      "5.72597",
      "-10.9699",
      "3.19435",
      "6.35573",
      "1.71793",
      "14.5547",
      "-15.101",
      "-5.24537",
      "1.84019",
      "-4.66601",
      "-18.1092",
      "-0.540427",
      "-14.879",
      "6.83689",
      "-5.60004",
      "6.85539",
      "8.53603",
      "-27.5357",
      "-3.66795",
      "0.352817",
      "-12.8324",
      "6.76114",
      "5.56026",
      "-13.7414",
      "3.13639",
      "-6.42699",
      "7.66109",
      "0.976212",
      "3.63516",
      "-9.21878",
      "18.6318",
      "-18.308",
      "-19.3777",
      "-14.3982",
      "0.335483",
      "29.1088",
      "-4.40669",
      "-12.8984",
      "-6.47428",
      "-9.23714",
      "1.09456",
      "-5.31222",
      "12.9081",
      "-3.30698",
      "-3.14643",
      "22.3472",
      "-7.45603",
      "10.3392",
      "0.324456",
      "-21.1947",
      "-0.888221",
      "20.7411",
      "31.8721",
      "-6.03069",
      "-5.8129",
      "7.83436",
      "-14.946",
      "-13.6409",
      "-9.12959",
      "0.109356",
      "-2.7137",
      "18.2549",
      "-0.563414",
      "-3.42527",
      "-14.983",
      "13.2742",
      "-10.1105",
      "-11.8129",
      "2.96381",
      "-7.09357",
      "-7.85697",
      "-18.071",
      "5.95582",
      "-6.8609",
      "-31.8666",
      "-11.0769",
      "-16.3345",
      "-9.70396",
      "11.7991",
      "4.53052",
      "0.960037",
      "3.94703",
      "13.3743",
      "9.67305",
      "14.4075",
      "5.40061",
      "-11.8873",
      "-5.92645",
      "-20.3629",
      "-1.71259",
      "24.6747",
      "-4.59045",
      "-6.69666",
      "28.8191",
      "-13.1979",
      "-10.0331",
      "-26.3989",
      "9.82406",
      "-11.7"
    ],
    "word": "十年"
  },
  {
    "value": [
      "-1.05446",
      "-0.522415",
      "-3.3105",
      "4.27048",
      "3.84288",
      "1.07548",
      "12.3975",
      "3.28075",
      "4.43175",
      "3.3961",
      "-2.65458",
      "1.81255",
      "-2.90248",
      "-5.48141",
      "2.09876",
      "4.58826",
      "-3.48148",
      "2.32826",
      "-4.01851",
      "-6.49542",
      "4.81481",
      "-2.77217",
      "-1.06704",
      "-0.322811",
      "-0.355752",
      "1.58352",
      "-2.25918",
      "-2.90783",
      "4.50472",
      "4.35779",
      "-0.715084",
      "-6.82022",
      "-0.836281",
      "-1.29439",
      "-0.0692113",
      "-7.10763",
      "-0.35545",
      "5.82762",
      "2.5639",
      "0.237146",
      "1.27812",
      "4.74703",
      "1.77186",
      "-1.5656",
      "-3.00063",
      "-3.81145",
      "3.09041",
      "-2.7923",
      "-2.66652",
      "-1.8068",
      "-0.383714",
      "-0.706777",
      "4.10293",
      "6.17778",
      "-3.49219",
      "-0.218598",
      "2.22533",
      "8.44034",
      "3.73467",
      "-1.10637",
      "3.68543",
      "-5.72839",
      "-4.71864",
      "0.0965648",
      "1.63608",
      "4.96617",
      "2.01209",
      "1.85623",
      "-3.43997",
      "0.231571",
      "-4.30359",
      "-0.75582",
      "1.1567",
      "-6.91366",
      "-0.501564",
      "-4.51627",
      "-1.7912",
      "0.168112",
      "0.0121432",
      "-0.469593",
      "1.13621",
      "-5.26997",
      "4.1453",
      "-5.81189",
      "1.09695",
      "-6.79973",
      "1.52142",
      "-5.09961",
      "-2.38505",
      "-2.94788",
      "4.72142",
      "5.62617",
      "0.951123",
      "2.01101",
      "2.54846",
      "3.08591",
      "2.95268",
      "3.01564",
      "-2.39066",
      "-1.62274",
      "-0.0740178",
      "0.785098",
      "-2.54573",
      "-3.62372",
      "6.53876",
      "4.94835",
      "1.62991",
      "-0.313476",
      "1.36955",
      "-0.545499",
      "2.44768",
      "-0.771316",
      "-2.21641",
      "3.30325",
      "0.42855",
      "-0.0316941",
      "-0.264259",
      "5.69816",
      "5.63153",
      "-0.44893"
    ],
    "word": "头疼"
  }
]

未解决编码问题
编码问题已解决（2017/9/28）
随机编码问题随机出现？


5.情感分析
http://127.0.0.1:5558/sentiment?content=患者无明显诱因下出现胸痛，双下肢未见水肿。今补充诊断：肺部感染。患者舌红，苔黄腻，脉弦细予荆银合剂2瓶疏风清热

[
  {
    "value": 0.644518256187439,
    "word": "胸痛"
  },
  {
    "value": 0.04642421379685402,
    "word": "水肿"
  },
  {
    "value": 0.9999995231628418,
    "word": "肺部感染"
  },
  {
    "value": 0.999858021736145,
    "word": "苔黄腻"
  }
]




6.依存句法分析
http://127.0.0.1:5555/parser?content=患者无明显诱因下出现胸痛，双下肢未见水肿。

[
  {
    "ID": 1,
    "LEMMA": "患者",
    "POSTAG": "n",
    "SYMPTOM_FLAG": 0,
    "HEAD": 2,
    "RELATION": "SBV"
  },
  {
    "ID": 2,
    "LEMMA": "无",
    "POSTAG": "v",
    "SYMPTOM_FLAG": 0,
    "HEAD": 0,
    "RELATION": "HED"
  },
  {
    "ID": 3,
    "LEMMA": "明显",
    "POSTAG": "a",
    "SYMPTOM_FLAG": 0,
    "HEAD": 4,
    "RELATION": "ATT"
  },
  {
    "ID": 4,
    "LEMMA": "诱因",
    "POSTAG": "n",
    "SYMPTOM_FLAG": 0,
    "HEAD": 2,
    "RELATION": "VOB"
  },
  {
    "ID": 5,
    "LEMMA": "下",
    "POSTAG": "f",
    "SYMPTOM_FLAG": 0,
    "HEAD": 6,
    "RELATION": "ADV"
  },
  {
    "ID": 6,
    "LEMMA": "出现",
    "POSTAG": "v",
    "SYMPTOM_FLAG": 0,
    "HEAD": 8,
    "RELATION": "ATT"
  },
  {
    "ID": 7,
    "LEMMA": "胸痛",
    "POSTAG": "n",
    "SYMPTOM_FLAG": 1,
    "HEAD": 6,
    "RELATION": "VOB"
  },
  {
    "ID": 8,
    "LEMMA": "，",
    "POSTAG": "x",
    "SYMPTOM_FLAG": 0,
    "HEAD": 9,
    "RELATION": "ATT"
  },
  {
    "ID": 9,
    "LEMMA": "双下肢",
    "POSTAG": "n",
    "SYMPTOM_FLAG": 0,
    "HEAD": 11,
    "RELATION": "SBV"
  },
  {
    "ID": 10,
    "LEMMA": "未",
    "POSTAG": "d",
    "SYMPTOM_FLAG": 0,
    "HEAD": 11,
    "RELATION": "ADV"
  },
  {
    "ID": 11,
    "LEMMA": "见",
    "POSTAG": "v",
    "SYMPTOM_FLAG": 0,
    "HEAD": 2,
    "RELATION": "COO"
  },
  {
    "ID": 12,
    "LEMMA": "水肿",
    "POSTAG": "n",
    "SYMPTOM_FLAG": 1,
    "HEAD": 11,
    "RELATION": "VOB"
  },
  {
    "ID": 13,
    "LEMMA": "。",
    "POSTAG": "x",
    "SYMPTOM_FLAG": 0,
    "HEAD": 2,
    "RELATION": "WP"
  }
]



8.短文本相似度
http://127.0.0.1:5559/text_similar?content1=减轻，咳嗽，咳痰，量少色白，质稀，发热&content2=反复活动后胸闷、气促、肢肿十余年。偶尔伴有腹胀，出血，质稀，发热&type=8

0.7246570215900243


9.计算语义相似度
http://127.0.0.1:5559/text_similar?content1=发热&content2=头疼&type=9

0.6839204625332345

---------------------------------------------------------------------------------------------------------------------------
2017/9/29
未来的工作：
1.端口太多，合并端口
2.NLP接口文档的IP地址写在说明里，这样就可以避免将来服务器地址变动引起的文档多处改动
3.文本分类接口的文档需要另加分类粒度说明


---------------------------------------------------------------------------------------------------------------------------
2017/9/29
合并端口测试：
http://127.0.0.1:5555/segmentor?content=我写代码突然肚子痛，头晕，好像怀孕了，不知道会不会死
http://127.0.0.1:5555/entity?content=患者高血压和心脏病五年，现出现反复活动后胸闷、气促、肢肿十余年。偶尔伴有腹胀，出血，质稀，发热，我觉得我有糖尿病
http://127.0.0.1:5555/freq?content=我写代码突然肚子痛，头晕，好像怀孕了，不知道会不会死。
http://127.0.0.1:5555/w2v?content=患者十年头疼
http://127.0.0.1:5555/sentiment?content=患者无明显诱因下出现胸痛，双下肢未见水肿。今补充诊断：肺部感染。患者舌红，苔黄腻，脉弦细予荆银合剂2瓶疏风清热
http://127.0.0.1:5555/parser?content=患者无明显诱因下出现胸痛，双下肢未见水肿。
http://127.0.0.1:5555/text_similar?content1=减轻，咳嗽，咳痰，量少色白，质稀，发热&content2=反复活动后胸闷、气促、肢肿十余年。偶尔伴有腹胀，出血，质稀，发热&type=8
http://127.0.0.1:5555/text_similar?content1=发热&content2=头疼&type=9

host=localhost
port=5555

测试全部通过

---------------------------------------------------------------------------------------------------------------------------
未来的工作（2017/9/29）
1.文本分类接口的文档需要另加分类粒度说明(潘怀燕)
2.flask_web服务部署（包括开机启动、debug=False以及隐藏DOS窗口）
3.服务器python环境（相关包的安装）
